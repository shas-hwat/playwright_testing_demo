# Playwright Testing Demo

This repository contains a Playwright-based automation project with various functionalities, including UI automation, API testing, and utility functions. The project is built to handle both frontend and backend testing using Playwright, pytest, and Python.

## Project Structure

### Root Directory
- **inputs_outputs/**  
  This folder contains subdirectories to organize and manage sample files used in the project.
  
  - **download_folder/**  
    Files downloaded by various functions are stored here.
  
  - **sample_images/**  
    Sample images used for uploads can be placed in this folder.
  
  - **screen_recordings/**  
    This folder contains recordings generated from the functions.
  
  - **screenshots/**  
    Screenshots captured during the execution of functions are stored here.
  
  - **traced_object/**  
    This folder stores the trace zip files generated by Playwright.

### insta_buddy/
This directory contains practice code for automating Instagram interactions using `async_playwright`.

- **features/**  
  Contains all the Playwright functions.

  - **functions.py**
    - `search_user_and_like_n_pics`: Logs in, searches for a user by ID, opens their profile, and likes n pictures.
  
  - **misc.py**
    - `login`: Logs the user in and saves the session state in `insta_buddy/features/session_state.json` to avoid repeated logins.  
    - `login2`: Similar to `login`, but with different logic.  
    - `search_user_and_like_visible_pics`: Searches for a user by ID, likes visible pictures in the DOM, and includes scraping and alt tag analysis.
    - `search_user_and_leave_comment_on_first_three_pics`: Leaves a random emoji comment on the first three pictures of a user.
    - `like_visible_feed`: Likes visible articles in the user's feed.
    - `upload_a_picture`: Uploads a sample image to the Instagram feed.

  - **session_state.json**  
    The login session state is saved here to avoid repeated logins.

- **images/**  
  Contains sample images for testing purposes.

### utilities/
This directory contains utility files for enhanced scalability.
- **constants.py**  
- **support_func.py**  

### logs/
This directory stores the `pytest-html` reports generated after each test run.

### test/
Contains all test scripts using `sync_playwright`.

- **test_complete_api_testing.py**  
  Handles API responses (POST, GET, PATCH, DELETE) using `APIRequestContext` and `api_request_context` fixture.
  - `create_new_user`: Sends a POST request to create a user.
  - `login`: Logs in via POST request.
  - `test_get_user_profile`: Retrieves user profile info using a GET request.
  - `test_update_the_profile_info`: Updates the user's profile with a PATCH request.
  - `test_update_the_profile_password`: Updates the user's password.
  - `test_logout_the_user`: Logs out the user with a DELETE request.

- **test_custom_fixture.py**  
  Contains tests using custom fixtures.
  - `test_using_hindi_lan_browser_context`: Launches a Hindi language YouTube session.
  - `test_for_mobile_support`: Emulates an iPhone 14 and scrapes data from YouTube.

- **test_multiple_feature.py**  
  Miscellaneous test methods.
  - `test_login_and_assert_login`: Logs in and asserts the login status.
  - `test_dynamic_table`: Works with a dynamic table to retrieve specific elements.

- **test_recording_tracing.py**  
  Test functions for screenshots, videos, and tracing.
  - `test_take_snapshot_instagram`: Takes screenshots during Instagram's password reset process.
  - `test_record_video_facebook`: Records video while filling out the Facebook registration form.
  - `test_tracing_facebook`: Creates a ZIP tracing file for the Facebook registration process.

- **test_upload_and_download.py**  
  Test functions for file uploads and downloads.
  - `test_upload_a_file`: Uploads a file to a practice site.
  - `test_download`: Downloads a file and stores it in a specified path.

- **test_working_with_frames.py**  
  Tests interactions with iframe elements.

- **test_working_with_pages.py**  
  Basic tests for working with single or multiple pages and popups.

### utilities/
- **base_page.py**: Currently empty.
- **generate_fake_user.py**: Generates random user data in dictionary format.
- **home_page.py**: Currently empty.
- **locators.py**: Currently empty.
- **response_handler.py**: Currently empty.

### conftest.py
Contains fixtures shared across multiple test files.
- `browser_context_size`: Defines the browser window size (session scope).
- `browser_context_mobile_iphone_14`: Emulates an iPhone 14 (function scope).
- `context_for_hindi_language`: Launches a browser with Hindi language settings (function scope).
- `api_request_context`: Creates a context for API testing (session scope).

### pytest.ini
Configures logging and pytest options for test execution.  
Example options:
- `-s -v --tb=short --headed --slowmo 200 --html=logs/report.html`

### requirements.txt
Contains the list of required libraries and their versions.

## Usage

1. Install the required dependencies:
   ```bash
   pip install -r requirements.txt

2. Create a .env fie in the root directory with your password information to run the tests with ease.
  - DEMO_USERNAME=practice
  - DEMO_PASSWORD=SuperSecretPassword!

3. Command to view the traced test:
  - `playwright show-trace <file_path>.zip`

4. Command to run the individual test script:
  - `pytest tests/test_complete_api_testing.py`

5. Command to run the individual test:
  - `pytest tests/test_complete_api_testing.py -k "login"`
